<openerp>
    <data>
        <record id="res_partner_custom_form_view" model="ir.ui.view">
                <field name="name">Partner form view</field>
                <field name="model">res.partner</field>
                <field name="inherit_id" ref="base.view_partner_form"/>
                <field name="arch" type="xml">
                
                <!-- Hide 'is a company'-div -->
                <div class='oe_edit_only' position='attributes'>
                	<attribute name='invisible'>1</attribute>
                </div>
                
                <label for='type' position='attributes'>
                	<attribute name='invisible'>1</attribute>
                </label>
                
                <div name='div_type' position='attributes'>
                	<attribute name='invisible'>1</attribute>
                </div>
                
                <field name='use_parent_address' position='attributes'>
					<attribute name='attrs'>{'invisible': [('parent_id', '=', False)]}</attribute>
                </field>
                
                <label for="use_parent_address" position='attributes'>
					<attribute name='attrs'>{'invisible': [('parent_id', '=', False)]}</attribute>
                </label>
                
                <button name="open_parent" position='attributes'>
                	<attribute name='invisible'>1</attribute>
                </button>
                
    			<!--  Contacts -->
     			<xpath expr="//page[@string='Contacts']" position="attributes">
     				<attribute name='invisible'>1</attribute>
     			</xpath>
    			
                <xpath expr="//page[@string='Contacts']" position="after">
                    <page string="Contacts" attrs="{'invisible': [('is_company','=',False)]}">
                    
                        <field name="address_contact_recursive_ids"
                        		context="{
                        			'form_view_ref': 'crm_address_simplification.view_partner_simple_contact_form',
		                        	'default_parent_id': active_id, 
		                        	'default_type': 'contact', 
		                        	'default_is_company': False, 
		                        	'default_use_parent_address': True,
                        		}"
                        	>
                        	
                        	<tree delete="false">
                        		<field name='customer_number' string='#' />
                        		<field name='name' />
                        		<field name='phone' />
                        		<field name='email' />
                        		<field name='parent_id'/>
                        	</tree>
                        </field>
                        
                    </page>

                    <page string="Affiliates" attrs="{'invisible': [('is_company','=',False)]}">
                    
                        <field name="address_affiliate_ids" context="{
	                       		'default_parent_id': active_id, 
	                       		'default_type': 'delivery', 
	                       		'default_is_company': True, 
	                       		'default_use_parent_address': True,
                 			  	'default_street': street,
	                        	'default_street2': street2,
	                        	'default_city': city,
	                        	'default_state_id': state_id,
	                        	'default_zip': zip,
	                        	'default_contry_id': country_id,
                       		}">
                	   		<tree delete="false">
                	   			<field name='customer_number' string='#' />
	                       		<field name='name' />
	                       		<field name='phone' />
	                       		<field name='email' />
	                       		<field name='businessid' />
                       		</tree>
                        </field>
                    </page>

					<!-- eInvoice addresses -->
                    <page string="e-Invoice" attrs="{'invisible': [('is_company','=',False)]}">
                        <field name="address_einvoice_ids" context="{
                        		'form_view_ref': 'crm_address_simplification.view_partner_simple_einvoice_form',
	                        	'default_parent_id': active_id,
	                        	'default_name': 'Verkkolaskuosoite', 
	                        	'default_type': 'invoice', 
	                        	'default_is_company': True, 
	                        	'default_use_parent_address': False
                        	}">
                        	<tree delete="false">
	                       		<field name='name' />
	                       		<field name='edicode' />
	                       		<field name='einvoice_operator' />
                       		</tree>
                        </field>
                    </page>
                    
     			</xpath>
                    
                </field>
        </record>
    </data>
</openerp>