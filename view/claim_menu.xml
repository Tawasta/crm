<?xml version="1.0" encoding="UTF-8"?>
<openerp>
    <data>
    	<!-- Delete the 'Claims' menu item -->
		<delete model="ir.ui.menu" id="crm_claim.menu_crm_case_claims" />
		
		<!-- My claims menu action -->
        <record model="ir.actions.act_window" id="crm_case_categ_claim_my">
            <field name="name">Claims</field>
            <field name="res_model">crm.claim</field>
            <field name="view_type">form</field>
            <field name="view_mode">tree,calendar,form</field>
            <field name="auto_refresh">10</field>
            <field name="domain">[('user_id', '=', uid)]</field>
            <field name="context">{"search_default_active_claims":1, "stage_type":'claim'}</field>
            <field name="help" type="html">
                <p class="oe_view_nocontent_create">
                    Record and track your customers' claims. Claims may be linked to a sales order or a lot.You can send emails with attachments and keep the full history for a claim (emails sent, intervention type and so on).Claims may automatically be linked to an email address using the mail gateway module.
                </p>
            </field>
        </record>
        
		<!-- All claims menu action -->
        <record model="ir.actions.act_window" id="crm_case_categ_claim_all">
            <field name="name">Claims</field>
            <field name="res_model">crm.claim</field>
            <field name="view_type">form</field>
            <field name="view_mode">tree,calendar,form</field>
            <field name="auto_refresh">10</field>
            <field name="context">{"search_default_active_claims":1, "stage_type":'claim'}</field>
            <field name="help" type="html">
                <p class="oe_view_nocontent_create">
                    Record and track your customers' claims. Claims may be linked to a sales order or a lot.You can send emails with attachments and keep the full history for a claim (emails sent, intervention type and so on).Claims may automatically be linked to an email address using the mail gateway module.
                </p>
            </field>
        </record>
		
		<menuitem name="All claims" id="menu_crm_case_claims_all" parent="base.menu_aftersale" action="crm_case_categ_claim_all" sequence="10"/>
        <menuitem name="My claims" id="menu_crm_case_claims_my" parent="base.menu_aftersale" action="crm_case_categ_claim_my" sequence="20"/> 
        
		
		<!-- Filters view -->
      	<record id="view_crm_case_claims_filter_extension" model="ir.ui.view">
            <field name="name">crm.claim.filters</field>
            <field name="model">crm.claim</field>
            <field name="inherit_id" ref="crm_claim.view_crm_case_claims_filter"/>
            <field name="arch" type="xml">
            
            	<search position='inside'>
            		<filter string="Active claims" name="active_claims" domain="[('stage_id','in',(1,2))]" help="Active claims (new or in progress)"/>
            	</search>
            	
            	<field name="name" position='replace'>
            		<field name="name" string="Claims" filter_domain="['|', ('name','ilike',self), ('partner_id.name', 'ilike', self)]"/>
            	</field>
            </field>
      	</record> 
	</data>
</openerp>