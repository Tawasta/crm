<?xml version="1.0" encoding="UTF-8"?>
<openerp>
	<data>

		<record id="crm_case_claims_form_view" model="ir.ui.view">
			<field name="name">crm.case.claims.form.view.timesheet.records</field>
			<field name="model">crm.claim</field>
			<field name="inherit_id" ref="crm_claim.crm_case_claims_form_view" />
			<field name="arch" type="xml">

				<xpath expr='//sheet/group[last()]' position="after">
			        <group col="1">
                        <field name="suggested_analytic_account" invisble="1"/>
                        <field name="suggested_task" invisible="1"/>

                        <field name="timesheet_records"
                               context="{
                               'default_crm_claim': active_id,
                               'default_user_id': user_id,
                               'default_account_id': suggested_analytic_account,
                               'default_task_id': suggested_task,
                               }" >
                            <tree string="Work done" editable="top/bottom" class="work_done_tree">
								<field name="journal_id" invisble="1" />
								<field name="crm_claim" invisble="1" />
                                <field name="date" />
                                <field name="user_id" />
                                <field name="account_id" domain="[('state', '=', 'open')]" />
                                <field name="task_id" domain="[('project_id.analytic_account_id', '=', account_id), ('stage_id.fold', '=', False)]" />
                                <field name="name" style="width: 30%;"/>
                                <field name="unit_amount" widget="float_time"/>
                            </tree>
                        </field>
                    </group>
				</xpath>

			</field>
		</record> 

	</data>
</openerp>